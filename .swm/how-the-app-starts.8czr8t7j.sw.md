---
id: 8czr8t7j
title: How the app starts
file_version: 1.1.2
app_version: 1.9.14
---

In this part the `fastify`<swm-token data-swm-token=":src/index.ts:1:4:4:`import { fastify, environment } from &#39;@src/config&#39;;`"/> key is an instance from `fastify`<swm-token data-swm-token=":src/config.ts:21:4:4:`export const fastify = Fastify({`"/> config<br/>
The `environment`<swm-token data-swm-token=":src/index.ts:1:7:7:`import { fastify, environment } from &#39;@src/config&#39;;`"/> it haves all the keys ready to use that are validated in `environment`<swm-token data-swm-token=":src/config.ts:8:4:4:`export const environment = parseEnv(process.env, {`"/>
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/index.ts
```typescript
1      import { fastify, environment } from '@src/config';
```

<br/>

Here we add all the plugins setted in the folder `ðŸ“„ src/plugins` and all the api routes and configs that you can find in the folder `ðŸ“„ src/api`
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/index.ts
```typescript
2      import './plugins';
3      import './api';
```

<br/>

This is the magic part that by default when the `index.ts` is executed the `start` function runs.

If something fails on the initial process, an error is throwed and the process exit.

If all goes well, the `fastify`<swm-token data-swm-token=":src/index.ts:7:3:3:`		await fastify.listen({`"/> is called and it opens the server with the given `host` and `port`

Then the `swagger`<swm-token data-swm-token=":src/index.ts:11:3:3:`		fastify.swagger();`"/>line build all the things related to the documentation _(the config file for this is in `ðŸ“„ src/plugins/swagger.ts`)_
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/index.ts
```typescript
5      export const start = async () => {
6      	try {
7      		await fastify.listen({
8      			port: environment.PORT,
9      			host: environment.HOST,
10     		});
11     		fastify.swagger();
12     	} catch (err) {
13     		fastify.log.error(err);
14     		process.exit(1);
15     	}
16     };
17     start();
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBcGF5YW5hLWNoYWxsZW5nZSUzQSUzQW1hcnR1ZGV2/docs/8czr8t7j).
